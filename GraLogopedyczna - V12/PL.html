<!DOCTYPE html>
<html lang="pl-PL">
<head>
    <!-- Blokada zmniejszania ekranu poni≈ºej minimalnego rozmiaru -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Fabryka G≈Ços√≥w - Detektywistyczna Gra Logopedyczna</title>
    <link rel="stylesheet" href="src/css/style.css">
</head>
<body>
    <!-- TOP BAR - BOX NA G√ìRZE Z PRZYCISKAMI I PUNKTACJƒÑ -->
    <div class="top-bar">
        <!-- LEWY BOK - PRZYCISK DZIENNIKA -->
        <div class="top-bar-left">
            <img src="assets/images/dziennik.png" alt="Otw√≥rz dziennik" id="journalBtn" title="Otw√≥rz dziennik">
        </div>

        <!-- ≈öRODEK - PUNKTACJA -->
        <div class="top-bar-center">
            <div id="score" class="pl" title="Punkty">PUNKTY: 0</div>
            <div id="score1" class="ang" title="Points">POINTS: 0</div>
        </div>

        <!-- PRAWY BOK - MIKROFON I FLAGA ANGIELSKA -->
        <div class="top-bar-right">
            <button id="globalMicBtn"><span>üé§</span></button>
            <img src="assets/images/angFlaga.png" alt="Zmie≈Ñ jƒôzyk" id="angBtn" title="English">
        </div>
    </div>

    <!-- G≈Å√ìWNY KONTENER GRY - WSZYSTKIE EKRANY TUTAJ -->
    <div class="game-viewport">
        <!-- Main Menu Screen -->
        <div id="mainMenu" class="screen active">
            <div class="container">
                <h1 class="game-title pl">üè≠ Fabryka G≈Ços√≥w</h1>
                <h1 class="game-title ang">üè≠ Voice Factory</h1>
                <h2 class="game-subtitle pl">Detektywistyczna Gra Logopedyczna</h2>
                <h2 class="game-subtitle ang">Detective Speech Game</h2>
                <p class="game-description pl">
                    Wciel siƒô w rolƒô detektywa w tajemniczej fabryce. 
                    RozwiƒÖzuj zagadki u≈ºywajƒÖc g≈Çosu i doskonalƒÖc wymowƒô trudnych g≈Çosek polskich.
                </p>
                <p class="game-description ang">
                    Step into the shoes of a detective in a mysterious factory.
                    Solve puzzles using your voice and improve your pronunciation of challenging Polish sounds.
                </p>
                <button id="startGameBtn" class="btn btn-primary pl">Rozpocznij ≈õledztwo</button>
                <button id="startGameBtn1" class="btn btn-primary ang">Start Investigation</button>
                <button id="helpBtn" class="btn btn-outline pl">Instrukcje</button>
                <button id="helpBtn1" class="btn btn-outline ang">Instructions</button>
                <a class="btn btn-primary" href="CZ.html">ƒåesk√° verze</a>
            </div>
        </div>

        <!-- EKRAN WSTƒòPU z przyciskiem TAK -->
        <div id="storyIntroScreen" class="screen">
            <div class="container intro-story-container">
                <h2 class="intro-story-title pl">Detektywie!</h2>
                <h2 class="intro-story-title ang">Detective!</h2>
                <div class="intro-story-text">
                    <p class="pl">W zakamarkach Fabryki grasuje tajemniczy sabota≈ºysta. M√≥wi sepleniƒÖcym, zniekszta≈Çconym g≈Çosem i niszczy wszystko, co tylko uda mu siƒô dorwaƒá. Je≈õli nie zatrzymamy go na czas ‚Äî nikt ju≈º nigdy nie powie nic poprawnie! Tylko ty i tw√≥j glos mogƒÖ nam pom√≥c." ‚Äì list w≈Ça≈õciciela fabryki </p>
                    <p class="ang">"In the depths of the Factory lurks a mysterious saboteur. He speaks in a lisping, distorted voice and destroys everything he can get his hands on. If we don't stop him in time ‚Äî no one will ever speak correctly again! Only you and your voice can help us." ‚Äì Letter from the Factory owner</p>
                    <p class="pl">Gotowy na wyzwanie? </p>
                    <p class="ang">Are you ready for this challenge?</p>
                </div>
                <button id="introYesBtn" class="btn btn-primary btn-large pl">TAK</button>
                <button id="introYesBtn1" class="btn btn-primary btn-large ang">YES</button>
            </div>
        </div>

        <!-- EKRAN Z DRZWIAMI -->
        <div id="doorScreen" class="screen">
            <div class="door-background">
                <div class="door-main-container">
                    <!-- MIEJSCE NA ZDJƒòCIE DRZWI -->
                    <img src="assets/images/drzwi.png" alt="Drzwi do fabryki" class="drzwi-image">
                    
                    <!-- Nak≈Çadka z instrukcjƒÖ -->
                    <div class="door-interaction-overlay">
                        <h2 class="door-title pl">Wej≈õcie do Fabryki</h2>
                        <h2 class="door-title ang">Factory Entrance</h2>

                        <p class="door-instruction pl">
                            Aby wej≈õƒá, wypowiedz:<br>
                            <strong class="voice-command">"Otw√≥rz drzwi"</strong>
                        </p>
                        <p class="door-instruction ang">
                            To enter, say:<br>
                            <strong class="voice-command">"Otw√≥rz drzwi"</strong>
                        </p>
                        <!-- Feedback -->
                        <p id="doorSpeechResult" class="speech-feedback"></p>
                    </div>
                    
                </div>
            </div>
        </div>

        <!-- Factory View Screen -->
        <div id="factoryScreen" class="screen">
            <div class="factory-background">
                <div class="factory-container">
                    
                    <img src="assets/images/Fabryka.png" alt="Fabryka" class="factory-image">
                    <img src="assets/images/maszyna-1-nap.png" id="1-nap" alt="Fabryka" class="factory-image" style="display: none;">
                    <img src="assets/images/kable-n.png" id="kable-nap" alt="Fabryka" class="factory-image" style="display: none;">
                    <img src="assets/images/s-n.png" id="skrzynia-nap" alt="Fabryka" class="factory-image" style="display: none;">
                    <img src="assets/images/robot-n.png" id="robot-nap" alt="Fabryka" class="factory-image" style="display: none;">
                    <img src="assets/images/maszyna2-n.png" id="2-nap" alt="Fabryka" class="factory-image" style="display: none;">

                    <button id="machineBtn1" class="machine-button1" style="display: none;">
                        <img src="assets/images/maszyna1-mini.png" alt="Maszyna1" class="machine-image1">
                    </button>
                    <button id="machineBtn2" class="machine-button2" style="display: block;">
                        <img src="assets/images/kable-mini.png" alt="Maszyna2" class="machine-image2">
                    </button>
                    <button id="machineBtn3" class="machine-button3" style="display: none;">
                        <img src="assets/images/robot-mini.png" alt="Maszyna3" class="machine-image3">
                    </button>
                    <button id="machineBtn4" class="machine-button4" style="display: none;">
                        <img src="assets/images/s3-mini.png" alt="Maszyna4" class="machine-image4">
                    </button>
                    <button id="machineBtn5" class="machine-button5" style="display: none;">
                        <img src="assets/images/maszyna2-mini.png" alt="Maszyna5" class="machine-image5">
                    </button>
                </div>
            </div>
        </div>

        <!-- Game Screen Maszyna 1 -->
        <div id="gameScreen" class="screen">
            <div class="game-window">
                <h2 id="levelTitle" class="levels-instructions">Poziom</h2>
                <p id="levelHint" class="level-hints">Wskaz√≥wka</p>
                <p id="speechResult" class="speech-feedback"></p>
                <button id="backBtn" class="btn btn-secondary pl">Powr√≥t</button>
                <button id="backBtn1" class="btn btn-secondary ang">Back</button>
                <!-- ===== PRZYCISK POMINIƒòCIA MASZYNA STERUJƒÑCA ===== -->
                <button id="skipButtonGame" class="btn btn-primary skip-button" style="display: none;">
                    ‚è≠Ô∏è POMI≈É ETAP
                </button>

            </div>
        </div>

        <!-- Game Screen Kable -->
        <div id="gameScreenKable" class="screen">
            <div class="kable-background">
                <div class="kable-container">
                    <img src="assets/images/kable-4.png" alt="Kable" class="kable-image">
                    
                    <img src="assets/images/kab-czerwony.png" alt="Kable" class="kable-image" id="kab-czerwony" style="display: none;">
                    <img src="assets/images/kab-brƒÖzowy.png" alt="Kable" class="kable-image" id="kab-brazowy" style="display: none;">
                    <img src="assets/images/kab-pom.png" alt="Kable" class="kable-image" id="kab-pomaranczowy" style="display: none;">
                    <img src="assets/images/kab-≈º√≥≈Çty.png" alt="Kable" class="kable-image" id="kab-zolty" style="display: none;">
                    <img src="assets/images/kab-grana.png" alt="Kable" class="kable-image" id="kab-granatowy" style="display: none;">
                    <img src="assets/images/kab-szary.png" alt="Kable" class="kable-image" id="kab-szary" style="display: none;">
                </div>
                <p id="kableSpeechResult" class="speech-feedback"></p>
                <button id="backBtnKable" class="btn btn-secondary pl">Powr√≥t</button>
                <button id="backBtnKable1" class="btn btn-secondary ang">Back</button>
            </div>
        </div>

        <!-- GAME SCREEN SKRZYNIE -->
        <div id="gameScreenSkrzynie" class="screen">
            <div class="factory-background">
                <div class="game-window" style="width: 95%; height: 95%;"></div>
            </div>
        </div>
        
        <!-- GAME SCREEN Labirynt -->
        <div id="gameScreenMaze" class="screen">
            <div class="factory-background">
                <div class="maze-container" style="position: relative; aspect-ratio: 1/1; width: min(85vw, calc(100vh - var(--top-bar-height) - 40px)); height: min(85vw, calc(100vh - var(--top-bar-height) - 40px)); flex-shrink: 0;">
                    <!-- tutaj maze-game.js wrzuca canvas z ramkƒÖ -->
                </div>
            </div>
        </div>

        <!-- GAME SCREEN RURY -->
            <div id="gameScreenRury" class="screen">
            <div class="rury-background">
                <div class="game-window">
                    <div class="rury-controls">
                    <p id="RurySpeechResult" class="speech-feedback"></p>
                </div>
                <div class="rury-container">
                    <!-- G≈Ç√≥wne to rury -->
                    <img src="assets/images/Rury/rury.png" alt="Rury" class="rury-image" />

                    <!-- RURA 1 - G√ìRA LEWA -->
                    <div id="rura1" class="rura-button rura1" style="display: block;">
                    <img src="assets\images\Rury\2_kolanko.png" alt="Rura 1" class="rura-image-item" />
                    </div>

                    <!-- RURA 2 - G√ìRA PRAWA -->
                    <div id="rura2" class="rura-button rura2" style="display: block;">
                    <img src="assets\images\Rury\4_pozioma.png" alt="Rura 2" class="rura-image-item" />
                    </div>

                    <!-- RURA 3 - D√ì≈Å LEWA -->
                    <div id="rura3" class="rura-button rura3" style="display: block;">
                    <img src="assets\images\Rury\1_pionowa.png" alt="Rura 3" class="rura-image-item" />
                    </div>

                    <!-- RURA 4 - D√ì≈Å PRAWA -->
                    <div id="rura4" class="rura-button rura4" style="display: block;">
                    <img src="assets\images\Rury\3_trojnik.png" alt="Rura 4" class="rura-image-item" />
                    </div>
                </div>

                <!-- KOLUMNA KONTROLKI - FEEDBACK I PRZYCISK (POD GRƒÑ) -->
                <div class="rury-controls">
                    <button id="backBtnRury" class="btn btn-secondary pl">Powr√≥t</button>
                    <button id="backBtnRury1" class="btn btn-secondary ang">Back</button>
                </div>
                </div>
            </div>
            </div>


        <!-- Instrukcje Screen -->
        <div id="instructionsScreen" class="screen">
            <div class="container instructions-container">
                <h2>Instrukcja Gry</h2>
                
                <div class="instructions-content">
                    <h3>üéØ Cel Gry</h3>
                    <p>RozwiƒÖzuj zagadki logopedyczne w tajemniczej fabryce. U≈ºywaj g≈Çosu do interakcji z maszynami i doskonalenia wymowy trudnych g≈Çosek polskich i czeskich!</p>
                    
                    <h3>üéÆ Jak Graƒá?</h3>
                    <ol>
                        <li>Kliknij przycisk mikrofonu üé§ w prawym g√≥rnym rogu</li>
                        <li>Wyra≈∫nie wypowiedz podane s≈Çowo lub frazƒô</li>
                        <li>Gra rozpozna TwojƒÖ wymowƒô i przyzna punkty</li>
                        <li>Zbieraj punkty i odblokuj nowe poziomy!</li>
                    </ol>
                    
                    <h3>üí° Wskaz√≥wki</h3>
                    <ul class="tips-list">
                        <li>M√≥w wyra≈∫nie i spokojnie</li>
                        <li>S≈Çuchawki z mikrofonem poprawiajƒÖ rozpoznawanie</li>
                        <li>Globalny przycisk mikrofonu (üé§) pojawia siƒô tylko gdy jest potrzebny</li>
                        <li>Eksploruj dziennik detektywa aby odblokowaƒá minigry</li>
                    </ul>
                </div>

                <button id="backFromInstructionsBtn" class="btn btn-secondary">Powr√≥t do Menu</button>
            </div>
        </div>

        <!-- Dziennik Screen -->
        <div id="journalScreen" class="screen">
            <div class="container book-container">
                <h2 class="pl">Dziennik Detektywa</h2>
                <h2 class="ang">Detective's Journal</h2>
                <div id="book">
                    <!-- Strona 1 -->
                    <div class="book-page" id="page0">Witaj w dzienniku!</div>
                    
                    
                    <!-- Strona 2 -->
                    <div class="book-page" id="page1"> 
                        <div class="book-page pl">Odznaki</div>
                        <div class="book-page ang">Badges</div>
                        <div class="badges-container">
                            <img src="assets\images\odznaki\odz-1000.png" id="badge1" alt="Odznaka 1" class="badge-image" style="display: none;">
                            <img src="assets\images\odznaki\odz-1500.png" id="badge2" alt="Odznaka 2" class="badge-image" style="display: none;">
                            <img src="assets\images\odznaki\odz-2000.png" id="badge3" alt="Odznaka 3" class="badge-image" style="display: none;">
                            <img src="assets\images\odznaki\odz-2500.png" id="badge4" alt="Odznaka 4" class="badge-image" style="display: none;">
                            <img src="assets\images\odznaki\odz_kable.png" id="badge5" alt="Odznaka 5" class="badge-image" style="display: none;">
                            <img src="assets\images\odznaki\odz_maszyna1.png" id="badge6" alt="Odznaka 6" class="badge-image" style="display: none;">
                            <img src="assets\images\odznaki\odz_skrzynka.png" id="badge7" alt="Odznaka 7" class="badge-image" style="display: none;">
                            <img src="assets\images\odznaki\odz-robot.png" id="badge8" alt="Odznaka 8" class="badge-image" style="display: none;">
                        </div>
                    </div>
                    <!-- STRONA 2: MINIGRA UK≈ÅADANIE S≈ÅOWA -->
                    <div id="page2" class="journal-page" style="display:none;">
                    <div class="book-page">
                        <h2 class="pl">Pok√≥j Sterowania - Zagadka S≈Çowna</h2>
                        <h2 class="ang">Control Room - Word Puzzle</h2>
                        <p class="pl">Znajdujesz starƒÖ notatkƒô w pokoju sterowania. Na kartce jest wypisane s≈Çowo, ale litery sƒÖ wymieszane...</p>
                        <p class="ang">You find an old note in the control room. The paper has a word written on it, but the letters are mixed up...</p>

                        <!-- MINIGRA TUTAJ -->
                        <div id="miniGameUkadanieSowa">
                            
                            <div id="gameLetters" class="letters-container"></div>
                            
                            <div id="gameOutput" class="word-output"></div>
                            
                            <button id="resetUkadanieSowaBtn" class="btn btn-secondary pl">Wyczy≈õƒá</button>
                            <button id="resetUkadanieSowaBtn1" class="btn btn-secondary ang">Reset</button>
                            
                        </div>
                    </div>
                    </div>

                    <!-- Strona 4 z minigrƒÖ Drag & Drop -->
                    <div class="book-page" id="page3" style="display:none;">
                        <div id="page3-original-content" class="pl">Notatki w≈Çasne i osiƒÖgniƒôcia.</div>
                        <div id="page3-original-content" class="ang">Personal notes and achievements.</div>

                        <div id="miniGameFactoryDrag" class="mini-game page-minigame" style="display:none;">
                            <h3 class="pl">Dopasuj elementy automatyki do nazw</h3>
                            <h3 class="ang">Match automation elements to their names</h3>
                            <div id="factoryImages" class="drag-images-container"></div>
                            <div id="factoryTargets" class="drop-targets-container"></div>
                        
                            <div id="dragDropResult" class="game-result"></div>
                        </div>
                    </div>

                    <!-- Strona 4 z minigrƒÖ Kable-->
                    <div id="page4" class="book-page" style="display:none;">
                        <div id="miniGamePolskoCzeskieKable" style="display: none;">
                            <div class="overlay-minigame">
                                <div class="cables-game-container">
                                    <div class="cables-column left-cables">
                                        <h4 class="pl">Polski</h4>
                                        <h4 class="ang">Polish</h4>
                                        <div id="polishCables" class="cables-list"></div>
                                    </div>

                                    <canvas id="cablesCanvas" class="cables-canvas"></canvas>

                                    <div class="cables-column right-cables">
                                        <h4 class="pl">ƒåe≈°tina</h4>
                                        <h4 class="ang">Czech</h4>
                                        <div id="czechCables" class="cables-list"></div>
                                    </div>
                                </div>
                                <div class="game-result">
                                    <div id="cablesResult" class="word-output pl">Po≈ÇƒÖcz wszystkie s≈Çowa!</div>
                                    <div id="cablesResult1" class="word-output ang">Connect all the words!</div>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>

                <div class="book-nav pl">
                    <button class="btn btn-secondary" id="prevPageBtn">‚¨Ö Poprzednia strona</button>
                    <button id="backFromJournalBtn" >Powr√≥t</button>
                    <button class="btn btn-secondary" id="nextPageBtn">Nastƒôpna strona ‚û°</button>
                </div>
                <div class="book-nav ang">
                    <button class="btn btn-secondary" id="prevPageBtn1">‚¨Ö Previous page</button>
                    <button id="backFromJournalBtn1">Back</button>
                    <button class="btn btn-secondary" id="nextPageBtn1">Next page ‚û°</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SYSTEM DIALOG√ìW -->
    <div class="dialog-overlay" id="dialogOverlay">
        <div class="dialog-box">
            <div class="dialog-speaker-icon" id="dialogIcon">üó£Ô∏è</div>
            <div class="dialog-content">
                <div class="dialog-speaker-name" id="dialogSpeakerName">NPC</div>
                <div class="dialog-text" id="dialogText">Tekst dialogo...</div>
            </div>
            <button class="dialog-close-btn" id="dialogCloseBtn">‚úï</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="src/jsPL/A_Main.js"></script>
    <script src="src/jsPL/maze-game.js"></script>
    <script src="src/jsPL/CustomAlert.js"></script>
    <script src="src/jsPL/Drag-Drop.js"></script>
    <script src="src/jsPL/Kable.js"></script>
    <script src="src/jsPL/UkladanieSlowa.js"></script>
    <script src="src/jsPL/PoziomSkrzynie.js"></script>
    <script src="src/jsPL/Dialogi.js"></script>
</body>
</html>
