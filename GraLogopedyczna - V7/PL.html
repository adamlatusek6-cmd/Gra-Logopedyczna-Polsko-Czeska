<!DOCTYPE html>
<html lang="pl-PL">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Fabryka G≈Ços√≥w - Detektywistyczna Gra Logopedyczna</title>
    <link rel="stylesheet" href="src/css/style.css">
</head>
<body>
    <!-- Dziennik Button - positioned over factory background -->
    <img src="assets/images/dziennik.png" alt="Otw√≥rz dziennik" id="journalBtn" title="Otw√≥rz dziennik">
    <!-- Dziennik Button - positioned over factory background -->
    <img src="assets/images/angFlaga.png"  id="angBtn" title="Otw√≥rz dziennik">
    
    <!-- NOWY: Globalny przycisk mikrofonu (obok dziennika) -->
    <div id="globalMicBtn" class="global-mic-button" title="Mikrofon">
        üé§
    </div>
    <div id="score" class="global-points" title="Punkty" style="display: none;">PUNKTY: 0</div>

    <!-- Main Menu Screen -->
    <div id="mainMenu" class="screen active">
        <div class="container">
            
            <h1 class="game-title">üè≠ Fabryka G≈Ços√≥w</h1>
            <h2 class="game-subtitle">Detektywistyczna Gra Logopedyczna</h2>
            <p class="game-description">
                Wciel siƒô w rolƒô detektywa w tajemniczej fabryce. 
                RozwiƒÖzuj zagadki u≈ºywajƒÖc g≈Çosu i doskonalƒÖc wymowƒô trudnych g≈Çosek polskich.
            </p>
            <button id="startGameBtn" class="btn btn-primary">Rozpocznij ≈õledztwo</button>
            <button id="helpBtn" class="btn btn-outline">Instrukcje</button>
            <a class="btn btn-primary" href="CZ.html">ƒåesk√° verze</a>
            
        </div>
    </div>

    <!-- EKRAN WSTƒòPU z przyciskiem TAK -->
    <div id="storyIntroScreen" class="screen">
        <div class="container intro-story-container">
            <h2 class="intro-story-title">Detektywie!</h2>
            <h2 class="intro-story-title1-ang">(Detective!)</h2>
            <div class="intro-story-text">
                <p>W zakamarkach Fabryki grasuje tajemniczy sabota≈ºysta. M√≥wi sepleniƒÖcym, zniekszta≈Çconym g≈Çosem i niszczy wszystko, co tylko uda mu siƒô dorwaƒá. 
Je≈õli nie zatrzymamy go na czas ‚Äî nikt ju≈º nigdy nie powie nic poprawnie! Tylko ty i tw√≥j glos mogƒÖ nam pom√≥c.‚Äù ‚Äì list w≈Ça≈õciciela fabryki </p>
                <p class="ang">(You've arrived at a mysterious factory. Inside lie puzzles that can only be solved with your voice.)</p>
                <p>Gotowy na wyzwanie? </p>
                <p class="ang">(Are you ready for this challenge?)</p>
            </div>
            <button id="introYesBtn" class="btn btn-primary btn-large">TAK</button>
        </div>
    </div>

    <!-- EKRAN Z DRZWIAMI -->
    <div id="doorScreen" class="screen">
        <div class="door-background">
            <div class="door-main-container">
                <!-- MIEJSCE NA ZDJƒòCIE DRZWI -->
                <img src="assets/images/drzwi.png" alt="Drzwi do fabryki" class="main-image">
                
                <!-- Nak≈Çadka z instrukcjƒÖ (bez przycisku mikrofonu) -->
                <div class="door-interaction-overlay">
                    <h2 class="door-title">Wej≈õcie do Fabryki</h2>
                    <p class="door-instruction">
                        Aby wej≈õƒá, wypowiedz:<br>
                        <strong class="voice-command">"Otw√≥rz drzwi"</strong>
                    </p>
                    <!-- Feedback pod globalnym mikrofonem -->
                    <p id="doorSpeechResult" class="speech-feedback"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Factory View Screen -->
    <div id="factoryScreen" class="screen">
        <div class="factory-background">
            <div class="factory-container">
                <img src="assets/images/Fabryka.png" alt="Fabryka" class="main-image">
                <img src="assets/images/maszyna-1-nap.png" id="1-nap" alt="Fabryka" class="main-image" style="display: none;">
                <img src="assets/images/kable-n.png" id="kable-nap" alt="Fabryka" class="main-image" style="display: none;">
                <button id="machineBtn1" class="machine-button1" style="display: block;">
                    <img src="assets/images/maszyna1-mini.png" alt="Maszyna1" class="machine-image1">
                </button>
                <button id="machineBtn2" class="machine-button2" style="display: block;">
                    <img src="assets/images/kable-mini.png" alt="Maszyna2" class="machine-image2">
                </button>
                <button id="machineBtn3" class="machine-button3" style="display: block;">
                    <img src="assets/images/robot-mini.png" alt="Maszyna3" class="machine-image3">
                </button>
                <button id="machineBtn4" class="machine-button4" style="display: block;">
                    <img src="assets/images/s3-mini.png" alt="Maszyna3" class="machine-image4">
                </button>
            </div>
        </div>
    </div>

    <!-- Game Screen Maszyna 1 -->
    <div id="gameScreen" class="screen">
        <div class="game-window">
            <h2 id="levelTitle" class="levels-instructions">Poziom</h2>
            <p id="levelHint" class="level-hints">Wskaz√≥wka</p>
            <!-- Feedback zamiast przycisku mikrofonu -->
            <p id="speechResult" class="speech-feedback"></p>
            <button id="backBtn" class="btn btn-secondary">Powr√≥t do Fabryki</button>
        </div>
    </div>


    <!-- Game Screen Kable -->
    <div id="gameScreenKable" class="screen">
        <div class="kable-background">
            <div class="kable-container">
                <img src="assets/images/kable-4.png" alt="Kable" class="main-image">
                
                <img src="assets/images/kab-czerwony.png" alt="Kable" class="main-image" id="kab-czerwony" style="display: none;">
                <img src="assets/images/kab-brƒÖzowy.png" alt="Kable" class="main-image" id="kab-brazowy" style="display: none;">
                <img src="assets/images/kab-pom.png" alt="Kable" class="main-image" id="kab-pomaranczowy" style="display: none;">
                <img src="assets/images/kab-≈º√≥≈Çty.png" alt="Kable" class="main-image" id="kab-zolty" style="display: none;">
                <img src="assets/images/kab-grana.png" alt="Kable" class="main-image" id="kab-granatowy" style="display: none;">
                <img src="assets/images/kab-szary.png" alt="Kable" class="main-image" id="kab-szary" style="display: none;">
                

            </div>
            <p id="kableSpeechResult" class="speech-feedback"></p>

            <button id="backBtnKable" class="btn btn-secondary">Powr√≥t do Fabryki</button>
        </div>
    </div>

    <!-- GAME SCREEN SKRZYNIE -->
    <div id="gameScreenSkrzynie" class="screen">
        <div class="factory-background">
            <div class="game-window" style="width: 95%; height: 95%;">
                <!-- Zawarto≈õƒá bƒôdzie dynamicznie tworzona przez initPoziomSkrzynie() -->
            </div>
        </div>
    </div>

    <!-- Instrukcje Screen -->
    <div id="instructionsScreen" class="screen">
        <div class="container instructions-container">
            <h2>Instrukcja Gry</h2>
            
            <div class="instructions-content">
                <h3>üéØ Cel Gry</h3>
                <p>RozwiƒÖzuj zagadki logopedyczne w tajemniczej fabryce. U≈ºywaj g≈Çosu do interakcji z maszynami i doskonalenia wymowy trudnych g≈Çosek polskich i czeskich!</p>
                
                <h3>üéÆ Jak Graƒá?</h3>
                <ol>
                    <li>Kliknij przycisk mikrofonu üé§ w prawym g√≥rnym rogu</li>
                    <li>Wyra≈∫nie wypowiedz podane s≈Çowo lub frazƒô</li>
                    <li>Gra rozpozna TwojƒÖ wymowƒô i przyzna punkty</li>
                    <li>Zbieraj punkty i odblokuj nowe poziomy!</li>
                </ol>
                
                <h3>üí° Wskaz√≥wki</h3>
                <ul class="tips-list">
                    <li>M√≥w wyra≈∫nie i spokojnie</li>
                    <li>S≈Çuchawki z mikrofonem poprawiajƒÖ rozpoznawanie</li>
                    <li>Globalny przycisk mikrofonu (üé§) pojawia siƒô tylko gdy jest potrzebny</li>
                    <li>Eksploruj dziennik detektywa aby odblokowaƒá minigry</li>
                </ul>
            </div>

            <button id="backFromInstructionsBtn" class="btn btn-secondary">Powr√≥t do Menu</button>
        </div>
    </div>

    <!-- Dziennik Screen -->
    <div id="journalScreen" class="screen">
        <div class="container book-container">
            <h2>Dziennik Detektywa</h2>
            <div id="book">
                <!-- Strona 1 -->
                <div class="book-page" id="page0">Strona 1: Witaj w dzienniku!</div>
                
                <!-- Strona 2 -->
                <div class="book-page" id="page1" style="display:none;">Strona 2: Twoje postƒôpy zostanƒÖ tu zapisane.</div>

                <!-- STRONA 2: MINIGRA UK≈ÅADANIE S≈ÅOWA -->
                <div id="page2" class="journal-page" style="display:none;">
                <div class="journal-page-content">
                    <h2>Pok√≥j Sterowania - Zagadka S≈Çowna</h2>
                    <p>Znajdujesz starƒÖ notatkƒô w pokoju sterowania. Na kartce jest wypisane s≈Çowo, ale litery sƒÖ wymieszane...</p>
                    
                    <!-- MINIGRA TUTAJ -->
                    <div id="miniGameUkadanieSowa">
                        
                        <div id="gameLetters" class="letters-container"></div>
                        
                        <div id="gameOutput" class="word-output"></div>
                        
                        <button id="resetUkadanieSowaBtn" class="btn btn-secondary">
                            Wyczy≈õƒá
                        </button>
                        
                    </div>
                </div>
                </div>

                <!-- Strona 4 z minigrƒÖ Drag & Drop -->
                <div class="book-page" id="page3" style="display:none;">
                    <div id="page3-original-content">
                        Strona 4 - Notatki w≈Çasne i osiƒÖgniƒôcia.
                    </div>
                    
                    <div id="miniGameFactoryDrag" class="mini-game page-minigame" style="display:none;">
                        <h3>Dopasuj elementy automatyki do nazw</h3>
                        <div class="game-instructions">
                            PrzeciƒÖgnij obrazki do odpowiadajƒÖcych im nazw
                        </div>
                        
                        <div id="factoryImages" class="drag-images-container"></div>
                        <div id="factoryTargets" class="drop-targets-container"></div>
                        
                        <div class="game-controls">
                            <button id="resetFactoryDragBtn" class="btn btn-secondary">Reset gry</button>
                        </div>
                        <div id="dragDropResult" class="game-result"></div>
                    </div>
                </div>

                <!-- Strona 4 z minigrƒÖ Kable-->
                <div id="page4" class="book-page" style="display:none;">
                    <div id="miniGamePolskoCzeskieKable" style="display: none;">
                        <div class="overlay-minigame">
                            <div class="cables-game-container">
                                <div class="cables-column left-cables">
                                    <h4>Polski</h4>
                                    <div id="polishCables" class="cables-list"></div>
                                </div>

                                <canvas id="cablesCanvas" class="cables-canvas"></canvas>

                                <div class="cables-column right-cables">
                                    <h4>ƒåe≈°tina</h4>
                                    <div id="czechCables" class="cables-list"></div>
                                </div>
                            </div>

                            <div class="game-result">
                                <div id="cablesResult" class="word-output">Po≈ÇƒÖcz wszystkie s≈Çowa!</div>
                            </div>
                            
                            <div class="game-controls">
                                <button id="resetCablesBtn" class="btn btn-secondary">Reset Gry</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="book-nav">
                <button class="btn btn-secondary" id="prevPageBtn">‚¨Ö Poprzednia strona</button>
                <button class="btn btn-secondary" id="nextPageBtn">Nastƒôpna strona ‚û°</button>
            </div>

            <div class="journal-back-container">
                <button id="backFromJournalBtn">Powr√≥t do Menu</button>
            </div>
        </div>
    </div>

    <!-- SYSTEM DIALOG√ìW - Umie≈õƒá gdziekolwiek w HTML -->
    <div class="dialog-overlay" id="dialogOverlay">
        <div class="dialog-box">
            <div class="dialog-speaker-icon" id="dialogIcon">üó£Ô∏è</div>
            <div class="dialog-content">
                <div class="dialog-speaker-name" id="dialogSpeakerName">NPC</div>
                <div class="dialog-text" id="dialogText">Tekst dialogo...</div>
            </div>
            <button class="dialog-close-btn" id="dialogCloseBtn">‚úï</button>
        </div>
    </div>

    <!-- Scripts -->
    
    <script src="src/jsPL/A_Main.js"></script>
    <script src="src/jsPL/CustomAlert.js"></script>
    <script src="src/jsPL/Drag-Drop.js"></script>
    <script src="src/jsPL/Kable.js"></script>
    <script src="src/jsPL/UkladanieSlowa.js"></script>
    <script src="src/jsPL/PoziomSkrzynie.js"></script>
    <script src="src/jsPL/Dialogi.js"></script>
</body>
</html>
