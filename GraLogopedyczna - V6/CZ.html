<!DOCTYPE html>
<html lang="cz-CZ">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Fabryka G≈Ços√≥w - Detektywistyczna Gra Logopedyczna</title>
    <link rel="stylesheet" href="src/css/style.css">
</head>
<body>
    <!-- Dziennik Button - positioned over factory background -->
    <img src="assets/images/dziennik.png" alt="Otw√≥rz dziennik" id="journalBtn" title="Otw√≥rz dziennik">
    
    <!-- NOWY: Globalny przycisk mikrofonu (obok dziennika) -->
    <div id="globalMicBtn" class="global-mic-button" title="Mikrofon">
        üé§
    </div>
    <div id="score" class="global-points" title="Punkty" style="display: none;">PUNKTY: 0</div>

    <!-- Main Menu Screen -->
    <div id="mainMenu" class="screen active">
        <div class="container">
            
            <h1 class="game-title">üè≠ Tov√°rna hlas≈Ø</h1>
            <h2 class="game-subtitle">Detektivn√≠ logopedick√° hra</h2>
            <p class="game-description">
                V≈æij se do role detektiva v tajupln√© tov√°rnƒõ.
                ≈òe≈° h√°danky pomoc√≠ hlasu a zdokonaluj v√Ωslovnost obt√≠≈æn√Ωch polsk√Ωch hl√°sek.
            </p>
            <button id="startGameBtn" class="btn btn-primary">Zahaj vy≈°et≈ôov√°n√≠</button>
            <button id="helpBtn" class="btn btn-outline">Instrukce</button>
            <a class="btn btn-primary" href="PL.html">Polska wersja</a>
            
        </div>
    </div>

    <!-- EKRAN WSTƒòPU z przyciskiem TAK -->
    <div id="storyIntroScreen" class="screen">
        <div class="container intro-story-container">
            <h2 class="intro-story-title">V√≠tej, Detektive!</h2>
            <h2 class="intro-story-title1">(Hello, Detectvie!)</h2>
            <div class="intro-story-text">
                <p>Dostal ses p≈ôed tajemnou tov√°rnu. Uvnit≈ô se skr√Ωvaj√≠ h√°danky, kter√© m≈Ø≈æe≈° vy≈ôe≈°it jen d√≠ky sv√©mu hlasu.</p>
                <p>(You've arrived at a mysterious factory. Inside lie puzzles that can only be solved with your voice.)</p>
                <p>Legenda prav√≠, ≈æe tov√°rna vyr√°b√≠ hlasy‚Ä¶ ale u≈æ dlouho se nikdo nevr√°til, aby to potvrdil.</p>
                <p>(Legend has it that the factory produces voices... but no one has returned to confirm this for a long time.)</p>
                <p>Jsi p≈ôipraven√Ω na v√Ωzvu?</p>
                <p>(Are you ready for this challenge?)</p>
            </div>
            <button id="introYesBtn" class="btn btn-primary btn-large">ANO</button>
        </div>
    </div>

    <!-- EKRAN Z DRZWIAMI -->
    <div id="doorScreen" class="screen">
        <div class="door-background">
            <div class="door-main-container">
                <!-- MIEJSCE NA ZDJƒòCIE DRZWI -->
                <img src="assets/images/drzwi.png" alt="Drzwi do fabryki" class="main-image">
                
                <!-- Nak≈Çadka z instrukcjƒÖ (bez przycisku mikrofonu) -->
                <div class="door-interaction-overlay">
                    <h2 class="door-title">Vchod do tov√°rny</h2>
                    <p class="door-instruction">
                        Aby vstoupil, vyslov:  <br>
                        <strong class="voice-command">‚ÄûOtev≈ôi dve≈ôe‚Äù</strong>
                    </p>
                    <!-- Feedback pod globalnym mikrofonem -->
                    <p id="doorSpeechResult" class="speech-feedback"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Factory View Screen -->
    <div id="factoryScreen" class="screen">
        <div class="factory-background">
            <div class="factory-container">
                <img src="assets/images/Fabryka.png" alt="Fabryka" class="main-image">
                <img src="assets/images/maszyna-1-nap.png" id="1-nap" alt="Fabryka" class="main-image" style="display: none;">
                <img src="assets/images/kable-n.png" id="kable-nap" alt="Fabryka" class="main-image" style="display: none;">
                <button id="machineBtn1" class="machine-button1" style="display: block;">
                    <img src="assets/images/maszyna1-mini.png" alt="Maszyna1" class="machine-image1">
                </button>
                <button id="machineBtn2" class="machine-button2">
                    <img src="assets/images/kable-mini.png" alt="Maszyna2" class="machine-image2">
                </button>
                <button id="machineBtn3" class="machine-button3">
                    <img src="assets/images/robot-mini.png" alt="Maszyna3" class="machine-image3">
                </button>
                <button id="machineBtn4" class="machine-button4">
                    <img src="assets/images/s3-mini.png" alt="Maszyna3" class="machine-image4">
                </button>
            </div>
        </div>
    </div>

    <!-- Game Screen Maszyna 1 -->
    <div id="gameScreen" class="screen">
        <div class="game-window">
            <h2 id="levelTitle" class="levels-instructions">√örove≈à</h2>
            <p id="levelHint" class="level-hints">N√°povƒõda</p>
            <!-- Feedback zamiast przycisku mikrofonu -->
            <p id="speechResult" class="speech-feedback"></p>
            <p id="scoreDisplay" class="voice-command">Body: 0</p>
            <button id="backBtn" class="btn btn-secondary">N√°vrat do tov√°rny</button>
        </div>
    </div>


    <!-- Game Screen Kable -->
    <div id="gameScreenKable" class="screen">
        <div class="factory-background">
            <div class="kable-container">
                <img src="assets/images/kable-4cz.png" alt="Kable" class="main-image">
                
                <img src="assets/images/kab-czerwony.png" alt="Kable" class="main-image" id="kab-czerwony" style="display: none;">
                <img src="assets/images/kab-brƒÖzowy.png" alt="Kable" class="main-image" id="kab-brazowy" style="display: none;">
                <img src="assets/images/kab-pom.png" alt="Kable" class="main-image" id="kab-pomaranczowy" style="display: none;">
                <img src="assets/images/kab-≈º√≥≈Çty.png" alt="Kable" class="main-image" id="kab-zolty" style="display: none;">
                <img src="assets/images/kab-grana.png" alt="Kable" class="main-image" id="kab-granatowy" style="display: none;">
                <img src="assets/images/kab-szary.png" alt="Kable" class="main-image" id="kab-szary" style="display: none;">
                

            </div>
            <button id="backBtnKable" class="btn btn-secondary">N√°vrat do tov√°rny</button>
        </div>
    </div>

    <!-- Game Screen SKRZYNIE -->
    <div id="gameScreenSkrzynie" class="screen">
        <div class="game-window">
            <h2 id="levelTitle">√örove≈à</h2>
            <p id="levelHint">N√°povƒõda</p>
            <!-- Feedback zamiast przycisku mikrofonu -->
            <p id="speechResult" class="speech-feedback"></p>
            <button id="backBtn" class="btn btn-secondary">N√°vrat do tov√°rny</button>
        </div>
    </div>

    <!-- Instrukcje Screen -->
    <div id="instructionsScreen" class="screen">
        <div class="container instructions-container">
            <h2>N√°vod ke h≈ôe</h2>
            
            <div class="instructions-content">
                <h3>üéØ C√≠l hry</h3>
                <p>≈òe≈° logopedick√© h√°danky v tajupln√© tov√°rnƒõ. Pou≈æ√≠vej hlas k interakci se stroji a zdokonaluj v√Ωslovnost obt√≠≈æn√Ωch polsk√Ωch a ƒçesk√Ωch hl√°sek!</p>
                
                <h3>üéÆ Jak hr√°t?

                </h3>
                <ol>
                    <li>Klikni na tlaƒç√≠tko mikrofonu üé§ v prav√©m horn√≠m rohu</li>
                    <li>Jasnƒõ vyslov zadan√© slovo nebo fr√°zi</li>
                    <li>Hra rozpozn√° tvou v√Ωslovnost a p≈ôidƒõl√≠ body</li>
                    <li>Sb√≠rej body a odemykej nov√© √∫rovnƒõ!</li>
                </ol>
                
                <h3>üí° N√°povƒõda</h3>
                <ul class="tips-list">
                    <li>Mluv z≈ôetelnƒõ a klidnƒõ</li> 
                    <li>Sluch√°tka s mikrofonem zlep≈°uj√≠ rozpozn√°v√°n√≠</li> 
                    <li>Glob√°ln√≠ tlaƒç√≠tko mikrofonu (üé§) se zobraz√≠ jen, kdy≈æ je pot≈ôeba</li> 
                    <li>Prozkoumej detektiv≈Øv den√≠k a odemkni minihry</li>
                </ul>
            </div>

            <button id="backFromInstructionsBtn" class="btn btn-secondary">N√°vrat do menu</button>
        </div>
    </div>

    <!-- Dziennik Screen -->
    <div id="journalScreen" class="screen">
        <div class="container book-container">
            <h2>Detektiv≈Øv den√≠k</h2>
            <div id="book">
                <!-- Strona 1 -->
                <div class="book-page" id="page0">Str√°nka 1: V√≠tej v den√≠ku!</div>
                
                <!-- Strona 2 -->
                <div class="book-page" id="page1" style="display:none;">Str√°nka 2: Tv≈Øj postup se zde zaznamen√°.</div>

                <!-- STRONA 2: MINIGRA UK≈ÅADANIE S≈ÅOWA -->
                <div id="page2" class="journal-page" style="display:none;">
                <div class="journal-page-content">
                    <h2>Pokoj ovl√°d√°n√≠ ‚Äì Slovn√≠ h√°danka</h2>
                    <p>Najde≈° starou pozn√°mku v ovl√°dac√≠m pokoji. Na pap√≠≈ôe je napsan√© slovo, ale p√≠smena jsou prom√≠chan√°...</p>
                    
                    <!-- MINIGRA TUTAJ -->
                    <div id="miniGameUkadanieSowa">
                        
                        <div id="gameLetters" class="letters-container"></div>
                        
                        <div id="gameOutput" class="word-output"></div>
                        
                        <button id="resetUkadanieSowaBtn" class="btn btn-secondary">
                            Vymazat
                        </button>
                        
                    </div>
                </div>
                </div>

                <!-- Strona 4 z minigrƒÖ Drag & Drop -->
                <div class="book-page" id="page3" style="display:none;">
                    <div id="page3-original-content">
                        Str√°nka 4: Vlastn√≠ pozn√°mky a √∫spƒõchy.
                    </div>
                    
                    <div id="miniGameFactoryDrag" class="mini-game page-minigame" style="display:none;">
                        <h3>Dopasuj elementy automatizace k n√°zv≈Øm</h3>
                        <div class="game-instructions">
                            P≈ôet√°hni obr√°zky k odpov√≠daj√≠c√≠m n√°zv≈Øm
                        </div>
                        
                        <div id="factoryImages" class="drag-images-container"></div>
                        <div id="factoryTargets" class="drop-targets-container"></div>
                        
                        <div class="game-controls">
                            <button id="resetFactoryDragBtn" class="btn btn-secondary">Reset hry</button>
                        </div>
                        <div id="dragDropResult" class="game-result"></div>
                    </div>
                </div>

                <!-- Strona 4 z minigrƒÖ Kable-->
                <div id="page4" class="book-page" style="display:none;">
                    <div id="miniGamePolskoCzeskieKable" style="display: none;">
                        <div class="overlay-minigame">
                            <div class="cables-game-container">
                                <div class="cables-column left-cables">
                                    <h4>Polski</h4>
                                    <div id="polishCables" class="cables-list"></div>
                                </div>

                                <canvas id="cablesCanvas" class="cables-canvas"></canvas>

                                <div class="cables-column right-cables">
                                    <h4>ƒåe≈°tina</h4>
                                    <div id="czechCables" class="cables-list"></div>
                                </div>
                            </div>

                            <div class="game-result">
                                <div id="cablesResult" class="word-output">Spoj v≈°echna slova!</div>
                            </div>
                            
                            <div class="game-controls">
                                <button id="resetCablesBtn" class="btn btn-secondary">Reset hry</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="book-nav">
                <button class="btn btn-secondary" id="prevPageBtn">‚¨Ö P≈ôedchoz√≠ str√°nka</button>
                <button class="btn btn-secondary" id="nextPageBtn">Dal≈°√≠ str√°nka ‚û°</button>
            </div>

            <div class="journal-back-container">
                <button id="backFromJournalBtn">N√°vrat do menu</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="src/jsCZ/A_Main.js"></script>
    <script src="src/jsCZ/CustomAlert.js"></script>
    <script src="src/jsCZ/Drag-Drop.js"></script>
    <script src="src/jsCZ/Kable.js"></script>
    <script src="src/jsCZ/UkladanieSlowa.js"></script>
</body>
</html>
